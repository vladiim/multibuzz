<div class="code-tabs-wrapper not-prose my-6"
     data-controller="toggle"
     data-toggle-default-value="<%= default_lang %>"
     data-toggle-persist-value="mbuzz_docs_language"
     data-toggle-active-class="bg-slate-900 text-blue-400"
     data-toggle-inactive-class="text-slate-400 hover:text-slate-200">

  <%# Tab buttons %>
  <div class="code-tabs-nav flex items-center space-x-1 bg-slate-800 rounded-t-lg px-2 pt-2">
    <% languages.each do |lang| %>
      <% example = examples[lang] %>
      <% label = example[:label] || lang.to_s.titleize %>
      <button
        type="button"
        data-toggle-target="trigger"
        data-action="click->toggle#switch"
        data-value="<%= lang %>"
        class="code-tab px-4 py-2 text-sm font-medium rounded-t transition-colors">
        <%= label %>
      </button>
    <% end %>
  </div>

  <%# Tab panels %>
  <div class="code-tabs-content">
    <% languages.each do |lang| %>
      <% example = examples[lang] %>
      <% code = example[:code] %>
      <% syntax = example[:syntax] || lang.to_s %>

      <div data-toggle-target="content" data-value="<%= lang %>" class="code-panel">
        <div class="code-block">
          <div class="code-content bg-slate-900 rounded-b-lg overflow-x-auto">
            <pre class="p-4 m-0"><code class="language-<%= syntax %> text-sm leading-relaxed"><%=
              lexer = Rouge::Lexer.find_fancy(syntax.to_s, code) || Rouge::Lexers::PlainText.new
              formatter = Rouge::Formatters::HTML.new
              formatter.format(lexer.lex(code)).html_safe
            %></code></pre>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
